<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
  <div id="main">
    <div id="canvas">
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Welcome Admin</a>
          
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/admin-dashboard">Home</a>
              </li>
            <li class="nav-item">
              <a class="nav-link" href="/display_users">Users</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Search</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/lot_summary">Summary</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/login">Log Out</a>
            </li>
          </ul>
        </div>  
        </nav>
          
          <form class="d-flex" role="search" method="post" action="/search_lots">
            <div class="btn-group">
              <select class="form-select" name="category">
                <option value="Lot ID">Lot ID</option>
                <option value="Prime Location">Prime Location</option>
                <option value="Address">Address</option>
              </select>

            </div>
            <input class="form-control me-2" type="search" placeholder="Search" name="category_value" aria-label="Search"/>
            <input class="btn btn-outline-success" type="submit" value="Search">
          </form>
          {% if pklots is not none %}
          {% if pklots %}
          <table class="table">
              <thead>
                <tr>
                  <th scope="col">Lot ID</th>
                  <th scope="col">Prime Location</th>
                  <th scope="col">Lot Address</th>
                  <th scope="col">Available Spots/Total Spots</th>
                </tr>
              </thead>
                <tbody>
                  {% for lot in pklots %}
                  <tr>
                    <th scope="row">{{lot.id}}</th>
                    <td>{{lot.prime_location_name}}</td>
                    <td>{{lot.address}}</td>
                    <td>{{lot.pkspots|length - lot.occ_spots}}/{{lot.pkspots|length}}</td>
            
                  </tr>
                  {% endfor %}
                </tbody>
          </table>
          
          {% else %}
            <p>No matches found</p>
          {% endif %}
          {% endif %}

      </div>  
    </div>
</body>
</html>